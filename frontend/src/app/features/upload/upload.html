<section class="upload-page">
  <div class="upload-container">
    <h1 class="title">Upload Invoice</h1>
    <p class="subtitle">
      Upload PDF or image files for automatic processing
    </p>

    <!-- Drop Zone -->
    <div
      class="drop-zone"
      [class.dragging]="isDragging()"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)"
    >
      <div class="drop-zone-content">
        <div class="upload-icon">ðŸ“¤</div>
        <h3>Drag & drop files here</h3>
        <p class="drop-hint">or click to browse</p>
        
        <input
          type="file"
          id="file-input"
          class="file-input"
          accept=".pdf,.jpg,.jpeg,.png,.webp"
          multiple
          (change)="onFileSelect($event)"
        />
        
        <label for="file-input" class="browse-btn">
          Choose Files
        </label>

        <p class="file-types">
          Supported: PDF, JPG, PNG, WEBP (max 10MB each)
        </p>
      </div>
    </div>

    <!-- Uploaded Files List -->
    @if (uploadedFiles().length > 0) {
      <div class="uploaded-files">
        <div class="files-header">
          <h3>Uploaded Files ({{ uploadedFiles().length }})</h3>
          @if (!isUploading()) {
            <button class="clear-btn" (click)="clearAll()">
              Clear All
            </button>
          }
        </div>

        <div class="files-list">
          @for (file of uploadedFiles(); track file.name) {
            <div class="file-item" [class.uploading]="file.status === 'uploading'">
              <div class="file-info">
                <div 
                  class="file-status-icon"
                  [style.color]="getStatusColor(file.status)"
                >
                  {{ getStatusIcon(file.status) }}
                </div>
                
                <div class="file-details">
                  <div class="file-name">{{ file.name }}</div>
                  <div class="file-meta">
                    <span class="file-size">{{ formatFileSize(file.size) }}</span>
                    @if (file.status === 'uploading') {
                      <span class="file-progress-text">{{ file.progress }}%</span>
                    }
                    @if (file.status === 'success') {
                      <span class="file-success">âœ“ Uploaded</span>
                    }
                    @if (file.status === 'error') {
                      <span class="file-error">{{ file.error || 'Upload failed' }}</span>
                    }
                  </div>
                </div>
              </div>

              <!-- Progress Bar -->
              @if (file.status === 'uploading') {
                <div class="progress-bar-container">
                  <div 
                    class="progress-bar-fill"
                    [style.width.%]="file.progress"
                  ></div>
                </div>
              }

              <!-- Remove Button -->
              @if (file.status !== 'uploading') {
                <button 
                  class="remove-btn"
                  (click)="removeFile(file.name)"
                >
                  âœ•
                </button>
              }
            </div>
          }
        </div>

        <!-- Action Buttons -->
        @if (!isUploading() && hasSuccessfulUploads()) {
          <div class="actions">
            <button class="primary-btn" (click)="goToDashboard()">
              View Dashboard â†’
            </button>
            <a routerLink="/admin" class="secondary-btn">
              Monitor Processing
            </a>
          </div>
        }
      </div>
    }

    <!-- Instructions -->
    <div class="instructions">
      <h3>How it works</h3>
      <div class="steps">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>Upload Files</h4>
            <p>Drag and drop or select invoice PDFs or images</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>AI Processing</h4>
            <p>Our AI extracts invoice data automatically</p>
          </div>
        </div>
        
        <div class="step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h4>View Results</h4>
            <p>Access structured data in your dashboard</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
